<div class="allocation-container">
  <button class="btn-add" (click)="openModal()">Add Allocation</button>

  <!-- Modal -->
  <div class="modal" *ngIf="showModal">
    <div class="modal-content">
      <span class="close" (click)="closeModal()">&times;</span>
      <h2>{{isEdit ? 'Edit' : 'Add'}} Allocation</h2>
      
      <form>
        <label>Doctor</label>
        <select [(ngModel)]="allocation.doctorCode" name="doctorCode" required>
          <option value="" disabled>Select Doctor</option>
          <option *ngFor="let doc of doctors" [value]="doc.doctorCode">{{doc.doctorCode}} - {{doc.doctorName}}</option>
        </select>

        <label>Floor/Room No.</label>
        <input type="text" [(ngModel)]="allocation.floorRoomNo" name="floorRoomNo" placeholder="Enter Floor/Room No." required />

        <label>Shift</label>
        <input type="text" [(ngModel)]="allocation.shift" name="shift" placeholder="Enter Shift" required />

        <label>Date</label>
        <input type="date" [(ngModel)]="allocation.date" name="date" required />

        <label>Time</label>
        <input type="time" [(ngModel)]="allocation.time" name="time" required />

        <button type="button" class="btn-save" (click)="saveAllocation()">{{isEdit ? 'Update' : 'Save'}}</button>
      </form>
    </div>
  </div>

  <!-- Table -->
  <table class="allocation-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Doctor Code</th>
        <th>Floor/Room</th>
        <th>Shift</th>
        <th>Date</th>
        <th>Time</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let alloc of allocations">
        <td>{{alloc.id}}</td>
        <td>{{alloc.doctorCode}}</td>
        <td>{{alloc.floorRoomNo}}</td>
        <td>{{alloc.shift}}</td>
        <td>{{alloc.date}}</td>
        <td>{{alloc.time}}</td>
        <td>
          <div class="action-buttons">
          <button class="edit-btn" (click)="editAllocation(alloc)">Edit</button>
          <button class="delete-btn" (click)="deleteAllocation(alloc.id!)">Delete</button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
